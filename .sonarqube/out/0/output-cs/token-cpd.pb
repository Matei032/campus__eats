Ç
OC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\State\AuthState.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
State #
{ 
public 

class 
	AuthState 
{ 
public 
string 
? 
Token 
{ 
get "
;" #
private$ +
set, /
;/ 0
}1 2
public		 
string		 
UserId		 
{		 
get		 "
;		" #
private		$ +
set		, /
;		/ 0
}		1 2
=		3 4
string		5 ;
.		; <
Empty		< A
;		A B
public

 
string

 
Username

 
{

  
get

! $
;

$ %
private

& -
set

. 1
;

1 2
}

3 4
=

5 6
string

7 =
.

= >
Empty

> C
;

C D
public 
List 
< 
string 
> 
Roles !
{" #
get$ '
;' (
private) 0
set1 4
;4 5
}6 7
=8 9
new: =
(= >
)> ?
;? @
public 
bool 
IsAuthenticated #
=>$ &
!' (
string( .
.. /
IsNullOrWhiteSpace/ A
(A B
TokenB G
)G H
;H I
public 
event 
Action 
? 
Changed $
;$ %
public 
void 
Set 
( 
string 
? 
token  %
,% &
string' -
userId. 4
,4 5
string6 <
username= E
,E F
IEnumerableG R
<R S
stringS Y
>Y Z
roles[ `
)` a
{ 	
Token 
= 
token 
; 
UserId 
= 
userId 
?? 
string %
.% &
Empty& +
;+ ,
Username 
= 
username 
??  "
string# )
.) *
Empty* /
;/ 0
Roles 
= 
new 
List 
< 
string #
># $
($ %
roles% *
??+ -
Array. 3
.3 4
Empty4 9
<9 :
string: @
>@ A
(A B
)B C
)C D
;D E
Changed 
? 
. 
Invoke 
( 
) 
; 
} 	
public 
void 
Clear 
( 
) 
{ 	
Token 
= 
null 
; 
UserId 
= 
string 
. 
Empty !
;! "
Username 
= 
string 
. 
Empty #
;# $
Roles 
= 
new 
( 
) 
; 
Changed   
?   
.   
Invoke   
(   
)   
;   
}!! 	
}"" 
}## Ê
UC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\OrderService.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
{ 
public 

class 
OrderService 
{ 
private 
readonly 

HttpClient #
_httpClient$ /
;/ 0
public

 
OrderService

 
(

 

HttpClient

 &

httpClient

' 1
)

1 2
{ 	
_httpClient 
= 

httpClient $
;$ %
} 	
public 
async 
Task 
< 
bool 
> 

PlaceOrder  *
(* +
CreateOrderCommand+ =
command> E
)E F
{ 	
try 
{ 
var 
response 
= 
await $
_httpClient% 0
.0 1
PostAsJsonAsync1 @
(@ A
$strA M
,M N
commandO V
)V W
;W X
if 
( 
response 
. 
IsSuccessStatusCode 0
)0 1
{ 
return 
true 
;  
} 
var 
error 
= 
await !
response" *
.* +
Content+ 2
.2 3
ReadAsStringAsync3 D
(D E
)E F
;F G
Console 
. 
	WriteLine !
(! "
$"" $
$str$ 4
{4 5
error5 :
}: ;
"; <
)< =
;= >
return 
false 
; 
} 
catch   
(   
	Exception   
ex   
)    
{!! 
Console"" 
."" 
	WriteLine"" !
(""! "
$"""" $
$str""$ 2
{""2 3
ex""3 5
.""5 6
Message""6 =
}""= >
"""> ?
)""? @
;""@ A
return## 
false## 
;## 
}$$ 
}%% 	
}&& 
}'' ï;
WC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\LoyaltyService.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services '
;' (
public 
class 
LoyaltyService 
{ 
private 
readonly 

HttpClient 
_httpClient  +
;+ ,
public

 

LoyaltyService

 
(

 

HttpClient

 $

httpClient

% /
)

/ 0
{ 
_httpClient 
= 

httpClient  
;  !
} 
public 

async 
Task 
< 
LoyaltyPointsDto &
?& '
>( )
GetLoyaltyInfo* 8
(8 9
)9 :
{ 
try 
{ 	
return 
await 
_httpClient $
.$ %
GetFromJsonAsync% 5
<5 6
LoyaltyPointsDto6 F
>F G
(G H
$strH \
)\ ]
;] ^
} 	
catch 
( 
	Exception 
ex 
) 
{ 	
Console 
. 
	WriteLine 
( 
$"  
$str  <
{< =
ex= ?
.? @
Message@ G
}G H
"H I
)I J
;J K
return 
null 
; 
} 	
} 
public"" 

async"" 
Task"" 
<"" 
decimal"" 
>"" 
	GetPoints"" (
(""( )
)"") *
{## 
try$$ 
{%% 	
var&& 
info&& 
=&& 
await&& 
GetLoyaltyInfo&& +
(&&+ ,
)&&, -
;&&- .
return'' 
info'' 
?'' 
.'' 
CurrentPoints'' &
??''' )
$num''* +
;''+ ,
}(( 	
catch)) 
()) 
	Exception)) 
ex)) 
))) 
{** 	
Console++ 
.++ 
	WriteLine++ 
(++ 
$"++  
$str++  >
{++> ?
ex++? A
.++A B
Message++B I
}++I J
"++J K
)++K L
;++L M
return,, 
$num,, 
;,, 
}-- 	
}.. 
public44 

async44 
Task44 
<44 
bool44 
>44 
Redeem44 "
(44" #
Guid44# '
userId44( .
,44. /
decimal440 7
pointsToRedeem448 F
)44F G
{55 
try66 
{77 	
var88 
payload88 
=88 
new88 
{88 
UserId88  &
=88' (
userId88) /
,88/ 0
PointsToRedeem881 ?
=88@ A
pointsToRedeem88B P
}88Q R
;88R S
var99 
response99 
=99 
await99  
_httpClient99! ,
.99, -
PostAsJsonAsync99- <
(99< =
$str99= Q
,99Q R
payload99S Z
)99Z [
;99[ \
return:: 
response:: 
.:: 
IsSuccessStatusCode:: /
;::/ 0
};; 	
catch<< 
(<< 
	Exception<< 
ex<< 
)<< 
{== 	
Console>> 
.>> 
	WriteLine>> 
(>> 
$">>  
$str>>  8
{>>8 9
ex>>9 ;
.>>; <
Message>>< C
}>>C D
">>D E
)>>E F
;>>F G
return?? 
false?? 
;?? 
}@@ 	
}AA 
publicFF 

asyncFF 
TaskFF 
<FF 
ListFF 
<FF !
LoyaltyTransactionDtoFF 0
>FF0 1
>FF1 2
GetTransactionsFF3 B
(FFB C
intFFC F
pageFFG K
=FFL M
$numFFN O
,FFO P
intFFQ T
pageSizeFFU ]
=FF^ _
$numFF` b
)FFb c
{GG 
tryHH 
{II 	
varJJ 
urlJJ 
=JJ 
$"JJ 
$strJJ 6
{JJ6 7
pageJJ7 ;
}JJ; <
$strJJ< F
{JJF G
pageSizeJJG O
}JJO P
"JJP Q
;JJQ R
returnKK 
awaitKK 
_httpClientKK $
.KK$ %
GetFromJsonAsyncKK% 5
<KK5 6
ListKK6 :
<KK: ;!
LoyaltyTransactionDtoKK; P
>KKP Q
>KKQ R
(KKR S
urlKKS V
)KKV W
??KKX Z
newKK[ ^
(KK^ _
)KK_ `
;KK` a
}LL 	
catchMM 
(MM 
	ExceptionMM 
exMM 
)MM 
{NN 	
ConsoleOO 
.OO 
	WriteLineOO 
(OO 
$"OO  
$strOO  <
{OO< =
exOO= ?
.OO? @
MessageOO@ G
}OOG H
"OOH I
)OOI J
;OOJ K
returnPP 
newPP 
ListPP 
<PP !
LoyaltyTransactionDtoPP 1
>PP1 2
(PP2 3
)PP3 4
;PP4 5
}QQ 	
}RR 
}SS 
publicWW 
classWW 
LoyaltyPointsDtoWW 
{XX 
publicYY 

GuidYY 
UserIdYY 
{YY 
getYY 
;YY 
setYY !
;YY! "
}YY# $
publicZZ 

decimalZZ 
CurrentPointsZZ  
{ZZ! "
getZZ# &
;ZZ& '
setZZ( +
;ZZ+ ,
}ZZ- .
public[[ 

decimal[[ 
TotalEarned[[ 
{[[  
get[[! $
;[[$ %
set[[& )
;[[) *
}[[+ ,
public\\ 

decimal\\ 
TotalRedeemed\\  
{\\! "
get\\# &
;\\& '
set\\( +
;\\+ ,
}\\- .
public]] 

decimal]] 
PointsValue]] 
{]]  
get]]! $
;]]$ %
set]]& )
;]]) *
}]]+ ,
}^^ 
public`` 
class`` !
LoyaltyTransactionDto`` "
{aa 
publicbb 

Guidbb 
Idbb 
{bb 
getbb 
;bb 
setbb 
;bb 
}bb  
publiccc 

Guidcc 
UserIdcc 
{cc 
getcc 
;cc 
setcc !
;cc! "
}cc# $
publicdd 

decimaldd 
PointsChangedd 
{dd  !
getdd" %
;dd% &
setdd' *
;dd* +
}dd, -
publicee 

stringee 
Typeee 
{ee 
getee 
;ee 
setee !
;ee! "
}ee# $
=ee% &
$stree' )
;ee) *
publicff 

stringff 
Descriptionff 
{ff 
getff  #
;ff# $
setff% (
;ff( )
}ff* +
=ff, -
$strff. 0
;ff0 1
publicgg 

Guidgg 
?gg 
OrderIdgg 
{gg 
getgg 
;gg  
setgg! $
;gg$ %
}gg& '
publichh 

DateTimehh 
	CreatedAthh 
{hh 
gethh  #
;hh# $
sethh% (
;hh( )
}hh* +
}ii ˙
\C:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\LocalStorageService.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
{ 
public 

class 
LocalStorageService $
{ 
private 
readonly 

IJSRuntime #

_jsRuntime$ .
;. /
public

 
LocalStorageService

 "
(

" #

IJSRuntime

# -
	jsRuntime

. 7
)

7 8
{ 	

_jsRuntime 
= 
	jsRuntime "
;" #
} 	
public 
async 
Task 
< 
string  
>  !
GetItemAsync" .
(. /
string/ 5
key6 9
)9 :
{ 	
return 
await 

_jsRuntime #
.# $
InvokeAsync$ /
</ 0
string0 6
>6 7
(7 8
$str8 N
,N O
keyP S
)S T
;T U
} 	
public 
async 
Task 
SetItemAsync &
(& '
string' -
key. 1
,1 2
string3 9
value: ?
)? @
{ 	
await 

_jsRuntime 
. 
InvokeVoidAsync ,
(, -
$str- C
,C D
keyE H
,H I
valueJ O
)O P
;P Q
} 	
public 
async 
Task 
RemoveItemAsync )
() *
string* 0
key1 4
)4 5
{ 	
await 

_jsRuntime 
. 
InvokeVoidAsync ,
(, -
$str- F
,F G
keyH K
)K L
;L M
} 	
public 
async 
Task 
SetItemAsync &
<& '
T' (
>( )
() *
string* 0
key1 4
,4 5
T6 7
value8 =
)= >
{ 	
var   
json   
=   
JsonSerializer   %
.  % &
	Serialize  & /
(  / 0
value  0 5
)  5 6
;  6 7
await!! 
SetItemAsync!! 
(!! 
key!! "
,!!" #
json!!$ (
)!!( )
;!!) *
}"" 	
public%% 
async%% 
Task%% 
<%% 
T%% 
?%% 
>%% 
GetItemAsync%% *
<%%* +
T%%+ ,
>%%, -
(%%- .
string%%. 4
key%%5 8
)%%8 9
{&& 	
var'' 
json'' 
='' 
await'' 
GetItemAsync'' )
('') *
key''* -
)''- .
;''. /
if)) 
()) 
string)) 
.)) 
IsNullOrWhiteSpace)) )
())) *
json))* .
))). /
)))/ 0
return** 
default** 
;** 
try,, 
{-- 
return.. 
JsonSerializer.. %
...% &
Deserialize..& 1
<..1 2
T..2 3
>..3 4
(..4 5
json..5 9
)..9 :
;..: ;
}// 
catch00 
{11 
return22 
default22 
;22 
}33 
}44 	
}55 
}66 é
YC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\DebugAuthHandler.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
;& '
public 
class 
DebugAuthHandler 
: 
DelegatingHandler  1
{ 
	protected 
override 
Task 
< 
HttpResponseMessage /
>/ 0
	SendAsync1 :
(: ;
HttpRequestMessage; M
requestN U
,U V
CancellationTokenW h
cancellationTokeni z
)z {
{ 
var 
hasAuth 
= 
request 
. 
Headers %
.% &
Authorization& 3
!=4 6
null7 ;
;; <
var 
prefix 
= 
hasAuth 
? 
request &
.& '
Headers' .
.. /
Authorization/ <
!< =
.= >
	Parameter> G
?G H
.H I
	SubstringI R
(R S
$numS T
,T U
MathV Z
.Z [
Min[ ^
(^ _
$num_ a
,a b
requestc j
.j k
Headersk r
.r s
Authorization	s Ä
!
Ä Å
.
Å Ç
	Parameter
Ç ã
!
ã å
.
å ç
Length
ç ì
)
ì î
)
î ï
:
ñ ó
$str
ò †
;
† °
Console		 
.		 
	WriteLine		 
(		 
$"		 
$str		 )
{		) *
request		* 1
.		1 2
Method		2 8
}		8 9
$str		9 :
{		: ;
request		; B
.		B C

RequestUri		C M
}		M N
$str		N W
{		W X
hasAuth		X _
}		_ `
$str		` p
{		p q
prefix		q w
}		w x
"		x y
)		y z
;		z {
return

 
base

 
.

 
	SendAsync

 
(

 
request

 %
,

% &
cancellationToken

' 8
)

8 9
;

9 :
} 
} ù
`C:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\CustomAuthStateProvider.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
{ 
public 

class #
CustomAuthStateProvider (
:) *'
AuthenticationStateProvider+ F
,F G
IDisposableH S
{ 
private		 
readonly		 
	AuthState		 "

_authState		# -
;		- .
public #
CustomAuthStateProvider &
(& '
	AuthState' 0
	authState1 :
): ;
{ 	

_authState 
= 
	authState "
;" #

_authState 
. 
Changed 
+= !
OnAuthStateChanged" 4
;4 5
} 	
public 
override 
Task 
< 
AuthenticationState 0
>0 1'
GetAuthenticationStateAsync2 M
(M N
)N O
{ 	
var 
identity 
= 
new 
ClaimsIdentity -
(- .
). /
;/ 0
if 
( 

_authState 
. 
IsAuthenticated *
)* +
{ 
var 
claims 
= 
new  
List! %
<% &
Claim& +
>+ ,
{ 
new 
Claim 
( 
$str #
,# $

_authState% /
./ 0
UserId0 6
)6 7
,7 8
new 
Claim 
( 

ClaimTypes (
.( )
NameIdentifier) 7
,7 8

_authState9 C
.C D
UserIdD J
)J K
,K L
new 
Claim 
( 

ClaimTypes (
.( )
Name) -
,- .

_authState/ 9
.9 :
Username: B
)B C
} 
; 
foreach   
(   
var   
role   !
in  " $

_authState  % /
.  / 0
Roles  0 5
)  5 6
{!! 
claims"" 
."" 
Add"" 
("" 
new"" "
Claim""# (
(""( )

ClaimTypes"") 3
.""3 4
Role""4 8
,""8 9
role"": >
)""> ?
)""? @
;""@ A
}## 
identity%% 
=%% 
new%% 
ClaimsIdentity%% -
(%%- .
claims%%. 4
,%%4 5
$str%%6 ?
)%%? @
;%%@ A
}&& 
var(( 
user(( 
=(( 
new(( 
ClaimsPrincipal(( *
(((* +
identity((+ 3
)((3 4
;((4 5
return)) 
Task)) 
.)) 

FromResult)) "
())" #
new))# &
AuthenticationState))' :
()): ;
user)); ?
)))? @
)))@ A
;))A B
}** 	
private,, 
void,, 
OnAuthStateChanged,, '
(,,' (
),,( )
{-- 	,
 NotifyAuthenticationStateChanged// ,
(//, -'
GetAuthenticationStateAsync//- H
(//H I
)//I J
)//J K
;//K L
}00 	
public22 
void22 
Dispose22 
(22 
)22 
{33 	

_authState44 
.44 
Changed44 
-=44 !
OnAuthStateChanged44" 4
;444 5
}55 	
}66 
}77 èD
TC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\CartService.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
{ 
public		 

class		 
CartService		 
{

 
private 
readonly 
LocalStorageService ,
_localStorage- :
;: ;
private 
List 
< 
CartItem 
> 
_cart $
=% &
new' *
(* +
)+ ,
;, -
public 
event 
Action 
? 
OnChange %
;% &
public 
CartService 
( 
LocalStorageService .
localStorage/ ;
); <
{ 	
_localStorage 
= 
localStorage (
;( )
} 	
public 
IReadOnlyList 
< 
CartItem %
>% &
Items' ,
=>- /
_cart0 5
;5 6
public 
int 
Count 
=> 
_cart !
.! "
Sum" %
(% &
i& '
=>( *
i+ ,
., -
Quantity- 5
)5 6
;6 7
public 
decimal 
Total 
=> 
_cart  %
.% &
Sum& )
() *
i* +
=>, .
i/ 0
.0 1
Subtotal1 9
)9 :
;: ;
public 
async 
Task 
InitializeAsync )
() *
)* +
{ 	
var!! 
	savedCart!! 
=!! 
await!! !
_localStorage!!" /
.!!/ 0
GetItemAsync!!0 <
<!!< =
List!!= A
<!!A B
CartItem!!B J
>!!J K
>!!K L
(!!L M
$str!!M S
)!!S T
;!!T U
if"" 
("" 
	savedCart"" 
!="" 
null"" !
)""! "
{## 
_cart$$ 
=$$ 
	savedCart$$ !
;$$! "
NotifyStateChanged%% "
(%%" #
)%%# $
;%%$ %
}&& 
}'' 	
public++ 
async++ 
Task++ 
	AddToCart++ #
(++# $

ProductDto++$ .
product++/ 6
,++6 7
int++8 ;
quantity++< D
=++E F
$num++G H
)++H I
{,, 	
var-- 
existingItem-- 
=-- 
_cart-- $
.--$ %
FirstOrDefault--% 3
(--3 4
i--4 5
=>--6 8
i--9 :
.--: ;
	ProductId--; D
==--E G
product--H O
.--O P
Id--P R
)--R S
;--S T
if// 
(// 
existingItem// 
!=// 
null//  $
)//$ %
{00 
existingItem11 
.11 
Quantity11 %
+=11& (
quantity11) 1
;111 2
}22 
else33 
{44 
_cart55 
.55 
Add55 
(55 
new55 
CartItem55 &
(55& '
product55' .
.55. /
Id55/ 1
,551 2
product553 :
.55: ;
Name55; ?
,55? @
product55A H
.55H I
Price55I N
,55N O
quantity55P X
)55X Y
)55Y Z
;55Z [
}66 
await88 
SaveCart88 
(88 
)88 
;88 
NotifyStateChanged99 
(99 
)99  
;99  !
}:: 	
public<< 
async<< 
Task<< 
	UpdateQty<< #
(<<# $
Guid<<$ (
	productId<<) 2
,<<2 3
int<<4 7
quantity<<8 @
)<<@ A
{== 	
var>> 
item>> 
=>> 
_cart>> 
.>> 
FirstOrDefault>> +
(>>+ ,
i>>, -
=>>>. 0
i>>1 2
.>>2 3
	ProductId>>3 <
==>>= ?
	productId>>@ I
)>>I J
;>>J K
if?? 
(?? 
item?? 
!=?? 
null?? 
)?? 
{@@ 
ifAA 
(AA 
quantityAA 
<=AA 
$numAA  !
)AA! "
{BB 
_cartCC 
.CC 
RemoveCC  
(CC  !
itemCC! %
)CC% &
;CC& '
}DD 
elseEE 
{FF 
itemGG 
.GG 
QuantityGG !
=GG" #
quantityGG$ ,
;GG, -
}HH 
awaitJJ 
SaveCartJJ 
(JJ 
)JJ  
;JJ  !
NotifyStateChangedKK "
(KK" #
)KK# $
;KK$ %
}LL 
}MM 	
publicOO 
asyncOO 
TaskOO 
RemoveOO  
(OO  !
GuidOO! %
	productIdOO& /
)OO/ 0
{PP 	
varQQ 
itemQQ 
=QQ 
_cartQQ 
.QQ 
FirstOrDefaultQQ +
(QQ+ ,
iQQ, -
=>QQ. 0
iQQ1 2
.QQ2 3
	ProductIdQQ3 <
==QQ= ?
	productIdQQ@ I
)QQI J
;QQJ K
ifRR 
(RR 
itemRR 
!=RR 
nullRR 
)RR 
{SS 
_cartTT 
.TT 
RemoveTT 
(TT 
itemTT !
)TT! "
;TT" #
awaitUU 
SaveCartUU 
(UU 
)UU  
;UU  !
NotifyStateChangedVV "
(VV" #
)VV# $
;VV$ %
}WW 
}XX 	
publicZZ 
asyncZZ 
TaskZZ 
ClearZZ 
(ZZ  
)ZZ  !
{[[ 	
_cart\\ 
.\\ 
Clear\\ 
(\\ 
)\\ 
;\\ 
await]] 
_localStorage]] 
.]]  
RemoveItemAsync]]  /
(]]/ 0
$str]]0 6
)]]6 7
;]]7 8
NotifyStateChanged^^ 
(^^ 
)^^  
;^^  !
}__ 	
privatecc 
asynccc 
Taskcc 
SaveCartcc #
(cc# $
)cc$ %
{dd 	
awaitee 
_localStorageee 
.ee  
SetItemAsyncee  ,
(ee, -
$stree- 3
,ee3 4
_cartee5 :
)ee: ;
;ee; <
}ff 	
publicgg 
asyncgg 
Taskgg  
UpdateProductDetailsgg .
(gg. /
Guidgg/ 3
	productIdgg4 =
,gg= >
stringgg? E
nameggF J
,ggJ K
decimalggL S
currentPriceggT `
)gg` a
{hh 	
varii 
itemii 
=ii 
_cartii 
.ii 
FirstOrDefaultii +
(ii+ ,
iii, -
=>ii. 0
iii1 2
.ii2 3
	ProductIdii3 <
==ii= ?
	productIdii@ I
)iiI J
;iiJ K
ifkk 
(kk 
itemkk 
!=kk 
nullkk 
)kk 
{ll 
boolmm 
changedmm 
=mm 
falsemm $
;mm$ %
ifoo 
(oo 
itemoo 
.oo 
	UnitPriceoo "
!=oo# %
currentPriceoo& 2
)oo2 3
{pp 
itemqq 
.qq 
	UnitPriceqq "
=qq# $
currentPriceqq% 1
;qq1 2
changedrr 
=rr 
truerr "
;rr" #
}ss 
ifuu 
(uu 
itemuu 
.uu 
Nameuu 
!=uu  
nameuu! %
)uu% &
{vv 
itemww 
.ww 
Nameww 
=ww 
nameww  $
;ww$ %
changedxx 
=xx 
truexx "
;xx" #
}yy 
if{{ 
({{ 
changed{{ 
){{ 
{|| 
await}} 
SaveCart}} "
(}}" #
)}}# $
;}}$ %
NotifyStateChanged~~ &
(~~& '
)~~' (
;~~( )
} 
}
ÄÄ 
}
ÅÅ 	
private
ÉÉ 
void
ÉÉ  
NotifyStateChanged
ÉÉ '
(
ÉÉ' (
)
ÉÉ( )
=>
ÉÉ* ,
OnChange
ÉÉ- 5
?
ÉÉ5 6
.
ÉÉ6 7
Invoke
ÉÉ7 =
(
ÉÉ= >
)
ÉÉ> ?
;
ÉÉ? @
}
ÑÑ 
}ÖÖ Î
ZC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\AuthHeaderHandler.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
{ 
public 

class 
AuthHeaderHandler "
:# $
DelegatingHandler% 6
{ 
private 
readonly 
LocalStorageService , 
_localStorageService- A
;A B
public

 
AuthHeaderHandler

  
(

  !
LocalStorageService

! 4
localStorageService

5 H
)

H I
{ 	 
_localStorageService  
=! "
localStorageService# 6
;6 7
} 	
	protected 
override 
async  
Task! %
<% &
HttpResponseMessage& 9
>9 :
	SendAsync; D
(D E
HttpRequestMessageE W
requestX _
,_ `
CancellationTokena r
cancellationToken	s Ñ
)
Ñ Ö
{ 	
var 
token 
= 
await  
_localStorageService 2
.2 3
GetItemAsync3 ?
(? @
$str@ K
)K L
;L M
if 
( 
! 
string 
. 
IsNullOrEmpty %
(% &
token& +
)+ ,
), -
{ 
request 
. 
Headers 
.  
Authorization  -
=. /
new0 3%
AuthenticationHeaderValue4 M
(M N
$strN V
,V W
tokenX ]
)] ^
;^ _
} 
return 
await 
base 
. 
	SendAsync '
(' (
request( /
,/ 0
cancellationToken1 B
)B C
;C D
} 	
} 
} –é
RC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Services\ApiClient.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Services &
{ 
public 

class 
	ApiClient 
{		 
private

 
readonly

 

HttpClient

 #
_httpClient

$ /
;

/ 0
public 
	ApiClient 
( 

HttpClient #

httpClient$ .
). /
{ 	
_httpClient 
= 

httpClient $
;$ %
} 	
public 
async 
Task 
< 
List 
< 

ProductDto )
>) *
>* +
GetMenuAsync, 8
(8 9
)9 :
{ 	
return 
await 
_httpClient $
.$ %
GetFromJsonAsync% 5
<5 6
List6 :
<: ;

ProductDto; E
>E F
>F G
(G H
$strH R
)R S
??T V
newW Z
(Z [
)[ \
;\ ]
} 	
public 
async 
Task 
< 

ProductDto $
?$ %
>% &
GetProductAsync' 6
(6 7
Guid7 ;
id< >
)> ?
{ 	
return 
await 
_httpClient $
.$ %
GetFromJsonAsync% 5
<5 6

ProductDto6 @
>@ A
(A B
$"B D
$strD M
{M N
idN P
}P Q
"Q R
)R S
;S T
} 	
public 
async 
Task 
CreateProductAsync ,
(, - 
CreateProductCommand- A
commandB I
)I J
{   	
var!! 
response!! 
=!! 
await!!  
_httpClient!!! ,
.!!, -
PostAsJsonAsync!!- <
(!!< =
$str!!= G
,!!G H
command!!I P
)!!P Q
;!!Q R
if"" 
("" 
!"" 
response"" 
."" 
IsSuccessStatusCode"" -
)""- .
{## 
var$$ 
error$$ 
=$$ 
await$$ !
response$$" *
.$$* +
Content$$+ 2
.$$2 3
ReadAsStringAsync$$3 D
($$D E
)$$E F
;$$F G
throw%% 
new%% 
	Exception%% #
(%%# $
$"%%$ &
$str%%& <
{%%< =
response%%= E
.%%E F

StatusCode%%F P
}%%P Q
$str%%Q T
{%%T U
error%%U Z
}%%Z [
"%%[ \
)%%\ ]
;%%] ^
}&& 
}'' 	
public)) 
async)) 
Task)) 
UpdateProductAsync)) ,
()), -
Guid))- 1
id))2 4
,))4 5 
UpdateProductCommand))6 J
command))K R
)))R S
{** 	
var++ 
response++ 
=++ 
await++  
_httpClient++! ,
.++, -
PutAsJsonAsync++- ;
(++; <
$"++< >
$str++> G
{++G H
id++H J
}++J K
"++K L
,++L M
command++N U
)++U V
;++V W
if,, 
(,, 
!,, 
response,, 
.,, 
IsSuccessStatusCode,, -
),,- .
{-- 
var.. 
error.. 
=.. 
await.. !
response.." *
...* +
Content..+ 2
...2 3
ReadAsStringAsync..3 D
(..D E
)..E F
;..F G
throw// 
new// 
	Exception// #
(//# $
$"//$ &
$str//& A
{//A B
response//B J
.//J K

StatusCode//K U
}//U V
$str//V Y
{//Y Z
error//Z _
}//_ `
"//` a
)//a b
;//b c
}00 
}11 	
public44 
async44 
Task44 
DeleteProductAsync44 ,
(44, -
Guid44- 1
id442 4
)444 5
{55 	
var66 
response66 
=66 
await66  
_httpClient66! ,
.66, -
DeleteAsync66- 8
(668 9
$"669 ;
$str66; D
{66D E
id66E G
}66G H
"66H I
)66I J
;66J K
if77 
(77 
!77 
response77 
.77 
IsSuccessStatusCode77 -
)77- .
{88 
throw99 
new99 
	Exception99 #
(99# $
$str99$ C
)99C D
;99D E
}:: 
};; 	
public?? 
async?? 
Task?? 
<?? 
OrderDto?? "
???" #
>??# $
CreateOrderAsync??% 5
(??5 6
CreateOrderCommand??6 H
command??I P
)??P Q
{@@ 	
varAA 
responseAA 
=AA 
awaitAA !
_httpClientAA" -
.AA- .
PostAsJsonAsyncAA. =
(AA= >
$strAA> J
,AAJ K
commandAAL S
)AAS T
;AAT U
ifBB 
(BB 
responseBB 
.BB 
IsSuccessStatusCodeBB -
)BB- .
{CC 
returnDD 
awaitDD 
responseDD &
.DD& '
ContentDD' .
.DD. /
ReadFromJsonAsyncDD/ @
<DD@ A
OrderDtoDDA I
>DDI J
(DDJ K
)DDK L
;DDL M
}EE 
returnFF 
nullFF 
;FF 
}GG 	
publicJJ 
asyncJJ 
TaskJJ 
<JJ 
ListJJ 
<JJ 
OrderDtoJJ '
>JJ' (
>JJ( )
GetUserOrdersAsyncJJ* <
(JJ< =
GuidJJ= A
userIdJJB H
)JJH I
{KK 	
returnLL 
awaitLL 
_httpClientLL $
.LL$ %
GetFromJsonAsyncLL% 5
<LL5 6
ListLL6 :
<LL: ;
OrderDtoLL; C
>LLC D
>LLD E
(LLE F
$"LLF H
$strLLH X
{LLX Y
userIdLLY _
}LL_ `
"LL` a
)LLa b
??LLc e
newLLf i
(LLi j
)LLj k
;LLk l
}MM 	
publicOO 
asyncOO 
TaskOO 
<OO 
UserDtoOO !
?OO! "
>OO" #
GetCurrentUserAsyncOO$ 7
(OO7 8
)OO8 9
{PP 	
tryQQ 
{RR 
returnSS 
awaitSS 
_httpClientSS (
.SS( )
GetFromJsonAsyncSS) 9
<SS9 :
UserDtoSS: A
>SSA B
(SSB C
$strSSC P
)SSP Q
;SSQ R
}TT 
catchUU 
(UU 
	ExceptionUU 
exUU 
)UU  
{VV 
ConsoleWW 
.WW 
	WriteLineWW !
(WW! "
$"WW" $
$strWW$ @
{WW@ A
exWWA C
.WWC D
MessageWWD K
}WWK L
"WWL M
)WWM N
;WWN O
returnXX 
nullXX 
;XX 
}YY 
}ZZ 	
public]] 
async]] 
Task]] 
<]] 
OrderDto]] "
?]]" #
>]]# $
GetOrderAsync]]% 2
(]]2 3
Guid]]3 7
orderId]]8 ?
)]]? @
{^^ 	
try__ 
{`` 
returnaa 
awaitaa 
_httpClientaa (
.aa( )
GetFromJsonAsyncaa) 9
<aa9 :
OrderDtoaa: B
>aaB C
(aaC D
$"aaD F
$straaF Q
{aaQ R
orderIdaaR Y
}aaY Z
"aaZ [
)aa[ \
;aa\ ]
}bb 
catchcc 
{dd 
returnee 
nullee 
;ee 
}ff 
}gg 	
publicjj 
asyncjj 
Taskjj 
CancelOrderAsyncjj *
(jj* +
Guidjj+ /
orderIdjj0 7
,jj7 8
stringjj9 ?
reasonjj@ F
=jjG H
$strjjI [
)jj[ \
{kk 	
varmm 
urlmm 
=mm 
$"mm 
$strmm #
{mm# $
orderIdmm$ +
}mm+ ,
$strmm, @
{mm@ A
UrimmA D
.mmD E
EscapeDataStringmmE U
(mmU V
reasonmmV \
)mm\ ]
}mm] ^
"mm^ _
;mm_ `
varnn 
responsenn 
=nn 
awaitnn  
_httpClientnn! ,
.nn, -
DeleteAsyncnn- 8
(nn8 9
urlnn9 <
)nn< =
;nn= >
ifpp 
(pp 
!pp 
responsepp 
.pp 
IsSuccessStatusCodepp -
)pp- .
{qq 
throwrr 
newrr 
	Exceptionrr #
(rr# $
$strrr$ B
)rrB C
;rrC D
}ss 
}tt 	
publicyy 
asyncyy 
Taskyy 
<yy 
Listyy 
<yy 
OrderDtoyy '
>yy' (
>yy( )(
GetPendingKitchenOrdersAsyncyy* F
(yyF G
)yyG H
{zz 	
return{{ 
await{{ 
_httpClient{{ $
.{{$ %
GetFromJsonAsync{{% 5
<{{5 6
List{{6 :
<{{: ;
OrderDto{{; C
>{{C D
>{{D E
({{E F
$str{{F [
){{[ \
??{{] _
new{{` c
({{c d
){{d e
;{{e f
}|| 	
public 
async 
Task "
UpdateOrderStatusAsync 0
(0 1
Guid1 5
orderId6 =
,= >
string? E
	newStatusF O
)O P
{
ÄÄ 	
var
ÇÇ 
payload
ÇÇ 
=
ÇÇ 
new
ÇÇ 
{
ÇÇ 
Status
ÇÇ  &
=
ÇÇ' (
	newStatus
ÇÇ) 2
}
ÇÇ3 4
;
ÇÇ4 5
var
ÉÉ 
response
ÉÉ 
=
ÉÉ 
await
ÉÉ  
_httpClient
ÉÉ! ,
.
ÉÉ, -
PatchAsJsonAsync
ÉÉ- =
(
ÉÉ= >
$"
ÉÉ> @
$str
ÉÉ@ S
{
ÉÉS T
orderId
ÉÉT [
}
ÉÉ[ \
$str
ÉÉ\ c
"
ÉÉc d
,
ÉÉd e
payload
ÉÉf m
)
ÉÉm n
;
ÉÉn o
if
ÖÖ 
(
ÖÖ 
!
ÖÖ 
response
ÖÖ 
.
ÖÖ !
IsSuccessStatusCode
ÖÖ -
)
ÖÖ- .
{
ÜÜ 
throw
áá 
new
áá 
	Exception
áá #
(
áá# $
$str
áá$ O
)
ááO P
;
ááP Q
}
àà 
}
ââ 	
public
åå 
async
åå 
Task
åå 
<
åå  
InventoryReportDto
åå ,
?
åå, -
>
åå- .$
GetDailyInventoryAsync
åå/ E
(
ååE F
DateTime
ååF N
?
ååN O
date
ååP T
=
ååU V
null
ååW [
)
åå[ \
{
çç 	
var
éé 
url
éé 
=
éé 
$str
éé 3
;
éé3 4
if
èè 
(
èè 
date
èè 
.
èè 
HasValue
èè 
)
èè 
{
êê 
url
ëë 
+=
ëë 
$"
ëë 
$str
ëë %
{
ëë% &
date
ëë& *
.
ëë* +
Value
ëë+ 0
:
ëë0 1
$str
ëë1 ;
}
ëë; <
"
ëë< =
;
ëë= >
}
íí 
return
ìì 
await
ìì 
_httpClient
ìì $
.
ìì$ %
GetFromJsonAsync
ìì% 5
<
ìì5 6 
InventoryReportDto
ìì6 H
>
ììH I
(
ììI J
url
ììJ M
)
ììM N
;
ììN O
}
îî 	
public
òò 
async
òò 
Task
òò 
<
òò 

PaymentDto
òò $
?
òò$ %
>
òò% &!
ProcessPaymentAsync
òò' :
(
òò: ;#
ProcessPaymentRequest
òò; P
request
òòQ X
)
òòX Y
{
ôô 	
try
öö 
{
õõ 
var
úú 
response
úú 
=
úú 
await
úú $
_httpClient
úú% 0
.
úú0 1
PostAsJsonAsync
úú1 @
(
úú@ A
$str
úúA W
,
úúW X
request
úúY `
)
úú` a
;
úúa b
if
ûû 
(
ûû 
response
ûû 
.
ûû !
IsSuccessStatusCode
ûû 0
)
ûû0 1
{
üü 
return
†† 
await
††  
response
††! )
.
††) *
Content
††* 1
.
††1 2
ReadFromJsonAsync
††2 C
<
††C D

PaymentDto
††D N
>
††N O
(
††O P
)
††P Q
;
††Q R
}
°° 
var
££ 
errorContent
££  
=
££! "
await
££# (
response
££) 1
.
££1 2
Content
££2 9
.
££9 :
ReadAsStringAsync
££: K
(
££K L
)
££L M
;
££M N
Console
§§ 
.
§§ 
	WriteLine
§§ !
(
§§! "
$"
§§" $
$str
§§$ 7
{
§§7 8
response
§§8 @
.
§§@ A

StatusCode
§§A K
}
§§K L
$str
§§L O
{
§§O P
errorContent
§§P \
}
§§\ ]
"
§§] ^
)
§§^ _
;
§§_ `
throw
•• 
new
•• "
HttpRequestException
•• .
(
••. /
$"
••/ 1
$str
••1 A
{
••A B
response
••B J
.
••J K

StatusCode
••K U
}
••U V
"
••V W
)
••W X
;
••X Y
}
¶¶ 
catch
ßß 
(
ßß 
	Exception
ßß 
ex
ßß 
)
ßß  
{
®® 
Console
©© 
.
©© 
	WriteLine
©© !
(
©©! "
$"
©©" $
$str
©©$ F
{
©©F G
ex
©©G I
.
©©I J
Message
©©J Q
}
©©Q R
"
©©R S
)
©©S T
;
©©T U
throw
™™ 
;
™™ 
}
´´ 
}
¨¨ 	
public
ÆÆ 
async
ÆÆ 
Task
ÆÆ 
<
ÆÆ 
List
ÆÆ 
<
ÆÆ 

PaymentDto
ÆÆ )
>
ÆÆ) *
>
ÆÆ* +(
GetUserPaymentHistoryAsync
ÆÆ, F
(
ÆÆF G
Guid
ÆÆG K
userId
ÆÆL R
)
ÆÆR S
{
ØØ 	
try
∞∞ 
{
±± 
return
≤≤ 
await
≤≤ 
_httpClient
≤≤ (
.
≤≤( )
GetFromJsonAsync
≤≤) 9
<
≤≤9 :
List
≤≤: >
<
≤≤> ?

PaymentDto
≤≤? I
>
≤≤I J
>
≤≤J K
(
≤≤K L
$"
≤≤L N
$str
≤≤N `
{
≤≤` a
userId
≤≤a g
}
≤≤g h
$str
≤≤h p
"
≤≤p q
)
≤≤q r
??
≥≥ 
new
≥≥ 
List
≥≥ "
<
≥≥" #

PaymentDto
≥≥# -
>
≥≥- .
(
≥≥. /
)
≥≥/ 0
;
≥≥0 1
}
¥¥ 
catch
µµ 
(
µµ 
	Exception
µµ 
ex
µµ 
)
µµ  
{
∂∂ 
Console
∑∑ 
.
∑∑ 
	WriteLine
∑∑ !
(
∑∑! "
$"
∑∑" $
$str
∑∑$ D
{
∑∑D E
ex
∑∑E G
.
∑∑G H
Message
∑∑H O
}
∑∑O P
"
∑∑P Q
)
∑∑Q R
;
∑∑R S
return
∏∏ 
new
∏∏ 
List
∏∏ 
<
∏∏  

PaymentDto
∏∏  *
>
∏∏* +
(
∏∏+ ,
)
∏∏, -
;
∏∏- .
}
ππ 
}
∫∫ 	
public
ºº 
async
ºº 
Task
ºº 
<
ºº 
List
ºº 
<
ºº 

PaymentDto
ºº )
>
ºº) *
>
ºº* +#
GetOrderPaymentsAsync
ºº, A
(
ººA B
Guid
ººB F
orderId
ººG N
)
ººN O
{
ΩΩ 	
try
ææ 
{
øø 
return
¿¿ 
await
¿¿ 
_httpClient
¿¿ (
.
¿¿( )
GetFromJsonAsync
¿¿) 9
<
¿¿9 :
List
¿¿: >
<
¿¿> ?

PaymentDto
¿¿? I
>
¿¿I J
>
¿¿J K
(
¿¿K L
$"
¿¿L N
$str
¿¿N a
{
¿¿a b
orderId
¿¿b i
}
¿¿i j
"
¿¿j k
)
¿¿k l
??
¡¡ 
new
¡¡ 
List
¡¡ "
<
¡¡" #

PaymentDto
¡¡# -
>
¡¡- .
(
¡¡. /
)
¡¡/ 0
;
¡¡0 1
}
¬¬ 
catch
√√ 
(
√√ 
	Exception
√√ 
ex
√√ 
)
√√  
{
ƒƒ 
Console
≈≈ 
.
≈≈ 
	WriteLine
≈≈ !
(
≈≈! "
$"
≈≈" $
$str
≈≈$ C
{
≈≈C D
ex
≈≈D F
.
≈≈F G
Message
≈≈G N
}
≈≈N O
"
≈≈O P
)
≈≈P Q
;
≈≈Q R
return
∆∆ 
new
∆∆ 
List
∆∆ 
<
∆∆  

PaymentDto
∆∆  *
>
∆∆* +
(
∆∆+ ,
)
∆∆, -
;
∆∆- .
}
«« 
}
»» 	
public
ÀÀ 
async
ÀÀ 
Task
ÀÀ 
<
ÀÀ 
OrderDto
ÀÀ "
?
ÀÀ" #
>
ÀÀ# $
GetOrderByIdAsync
ÀÀ% 6
(
ÀÀ6 7
Guid
ÀÀ7 ;
orderId
ÀÀ< C
)
ÀÀC D
{
ÃÃ 	
try
ÕÕ 
{
ŒŒ 
return
œœ 
await
œœ 
_httpClient
œœ (
.
œœ( )
GetFromJsonAsync
œœ) 9
<
œœ9 :
OrderDto
œœ: B
>
œœB C
(
œœC D
$"
œœD F
$str
œœF Q
{
œœQ R
orderId
œœR Y
}
œœY Z
"
œœZ [
)
œœ[ \
;
œœ\ ]
}
–– 
catch
—— 
{
““ 
return
”” 
null
”” 
;
”” 
}
‘‘ 
}
’’ 	
}
÷÷ 
}◊◊ ∞.
GC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Program.cs
var		 
builder		 
=		 "
WebAssemblyHostBuilder		 $
.		$ %
CreateDefault		% 2
(		2 3
args		3 7
)		7 8
;		8 9
builder

 
.

 
RootComponents

 
.

 
Add

 
<

 
App

 
>

 
(

  
$str

  &
)

& '
;

' (
builder 
. 
RootComponents 
. 
Add 
< 

HeadOutlet %
>% &
(& '
$str' 4
)4 5
;5 6
var 
apiBase 
= 
builder 
. 
Configuration #
[# $
$str$ 0
]0 1
??2 4
$str5 L
;L M
builder 
. 
Services 
. 
	AddScoped 
< 
	AuthState $
>$ %
(% &
)& '
;' (
builder 
. 
Services 
. 
	AddScoped 
< 
LocalStorageService .
>. /
(/ 0
)0 1
;1 2
builder 
. 
Services 
. 
	AddScoped 
< 
AuthService &
>& '
(' (
)( )
;) *
builder 
. 
Services 
. 
	AddScoped 
< '
AuthenticationStateProvider 6
,6 7#
CustomAuthStateProvider8 O
>O P
(P Q
)Q R
;R S
builder 
. 
Services 
. 
	AddScoped 
< 
CartService &
>& '
(' (
)( )
;) *
builder 
. 
Services 
. 
	AddScoped 
< 
OrderService '
>' (
(( )
)) *
;* +
builder 
. 
Services 
. 
	AddScoped 
< 
LoyaltyService )
>) *
(* +
)+ ,
;, -
builder 
. 
Services 
.  
AddAuthorizationCore %
(% &
)& '
;' (
builder 
. 
Services 
. 
AddTransient 
< 
AuthHeaderHandler /
>/ 0
(0 1
)1 2
;2 3
builder 
. 
Services 
. 
AddTransient 
< 
DebugAuthHandler .
>. /
(/ 0
)0 1
;1 2
builder 
. 
Services 
. 
AddHttpClient 
( 
$str +
,+ ,
client- 3
=>4 6
{ 
client 
. 
BaseAddress 
= 
new  
Uri! $
($ %
apiBase% ,
), -
;- .
}   
)   
.!! !
AddHttpMessageHandler!! 
<!! 
AuthHeaderHandler!! ,
>!!, -
(!!- .
)!!. /
."" !
AddHttpMessageHandler"" 
<"" 
DebugAuthHandler"" +
>""+ ,
("", -
)""- .
;"". /
builder$$ 
.$$ 
Services$$ 
.$$ 
	AddScoped$$ 
($$ 
sp$$ 
=>$$  
sp$$! #
.$$# $
GetRequiredService$$$ 6
<$$6 7
IHttpClientFactory$$7 I
>$$I J
($$J K
)$$K L
.$$L M
CreateClient$$M Y
($$Y Z
$str$$Z f
)$$f g
)$$g h
;$$h i
builder'' 
.'' 
Services'' 
.'' 
AddHttpClient'' 
<'' 
	ApiClient'' (
>''( )
('') *
client''* 0
=>''1 3
{(( 
client)) 
.)) 
BaseAddress)) 
=)) 
new))  
Uri))! $
())$ %
apiBase))% ,
))), -
;))- .
}** 
)** 
.++ !
AddHttpMessageHandler++ 
<++ 
AuthHeaderHandler++ ,
>++, -
(++- .
)++. /
.,, !
AddHttpMessageHandler,, 
<,, 
DebugAuthHandler,, +
>,,+ ,
(,,, -
),,- .
;,,. /
builder.. 
... 
Services.. 
... 
	AddScoped.. 
<.. 
CartService.. &
>..& '
(..' (
)..( )
;..) *
var00 
host00 
=00	 

builder00 
.00 
Build00 
(00 
)00 
;00 
var33 
auth33 
=33	 

host33 
.33 
Services33 
.33 
GetRequiredService33 +
<33+ ,
AuthService33, 7
>337 8
(338 9
)339 :
;33: ;
try44 
{55 
await66 	
auth66
 
.66 
InitializeAsync66 
(66 
)66  
;66  !
}77 
catch88 
(88 
	Exception88 
ex88 
)88 
{99 
Console:: 
.:: 
	WriteLine:: 
(:: 
$":: 
$str:: ?
{::? @
ex::@ B
.::B C
Message::C J
}::J K
"::K L
)::L M
;::M N
};; 
await== 
host== 

.==
 
RunAsync== 
(== 
)== 
;== ñ
dC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\Requests\UpdateProductCommand.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
.$ %
Requests% -
{ 
public 

class  
UpdateProductCommand %
{ 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public		 
string		 
Name		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
=		) *
string		+ 1
.		1 2
Empty		2 7
;		7 8
public

 
string

 
Description

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
=

0 1
string

2 8
.

8 9
Empty

9 >
;

> ?
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
Category 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
? 
ImageUrl 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 
string 
> 
	Allergens %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
(9 :
): ;
;; <
public 
string 
? 
DietaryRestrictions *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
bool 
IsAvailable 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} „
`C:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\Requests\OrderItemRequest.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
.$ %
Requests% -
{ 
public 

class 
OrderItemRequest !
{ 
public 
Guid 
	ProductId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
? 
SpecialInstructions *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
} Ç
dC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\Requests\CreateProductCommand.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
.$ %
Requests% -
{ 
public 

class  
CreateProductCommand %
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public 
string 
Description !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public		 
decimal		 
Price		 
{		 
get		 "
;		" #
set		$ '
;		' (
}		) *
public

 
string

 
Category

 
{

  
get

! $
;

$ %
set

& )
;

) *
}

+ ,
=

- .
string

/ 5
.

5 6
Empty

6 ;
;

; <
public 
string 
? 
ImageUrl 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 
string 
> 
	Allergens %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
(9 :
): ;
;; <
public 
string 
? 
DietaryRestrictions *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
bool 
IsAvailable 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ç	
bC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\Requests\CreateOrderCommand.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
.$ %
Requests% -
{ 
public 

class 
CreateOrderCommand #
{ 
public 
Guid 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public

 
string

 
?

 
PaymentMethod

 $
{

% &
get

' *
;

* +
set

, /
;

/ 0
}

1 2
public 
string 
? 
Notes 
{ 
get "
;" #
set$ '
;' (
}) *
public 
List 
< 
OrderItemRequest $
>$ %
Items& +
{, -
get. 1
;1 2
set3 6
;6 7
}8 9
=: ;
new< ?
(? @
)@ A
;A B
} 
} Ê
QC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\ProductDto.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
{ 
public 

class 

ProductDto 
{ 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public		 
string		 
Name		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
=		) *
string		+ 1
.		1 2
Empty		2 7
;		7 8
public

 
string

 
Description

 !
{

" #
get

$ '
;

' (
set

) ,
;

, -
}

. /
=

0 1
string

2 8
.

8 9
Empty

9 >
;

> ?
public 
decimal 
Price 
{ 
get "
;" #
set$ '
;' (
}) *
public 
string 
ImageUrl 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
Category 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
bool 
IsAvailable 
{  !
get" %
;% &
set' *
;* +
}, -
public 
List 
< 
string 
> 
	Allergens %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
=4 5
new6 9
(9 :
): ;
;; <
public 
string 
? 
DietaryRestrictions *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
DateTime 
? 
	UpdatedAt "
{# $
get% (
;( )
set* -
;- .
}/ 0
} 
} È
QC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\PaymentDto.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
;$ %
public 
class 

PaymentDto 
{ 
public 

Guid 
Id 
{ 
get 
; 
set 
; 
}  
public 

Guid 
OrderId 
{ 
get 
; 
set "
;" #
}$ %
public 

decimal 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 

string 
Status 
{ 
get 
; 
set  #
;# $
}% &
=' (
string) /
./ 0
Empty0 5
;5 6
public		 

string		 
Method		 
{		 
get		 
;		 
set		  #
;		# $
}		% &
=		' (
string		) /
.		/ 0
Empty		0 5
;		5 6
public 

string 
? !
StripePaymentIntentId (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 

string 
? 
StripeSessionId "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 

string 
? 
StripeClientSecret %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 

DateTime 
	CreatedAt 
{ 
get  #
;# $
set% (
;( )
}* +
public 

DateTime 
? 
PaidAt 
{ 
get !
;! "
set# &
;& '
}( )
public 

DateTime 
? 
FailedAt 
{ 
get  #
;# $
set% (
;( )
}* +
public 

string 
? 
FailureReason  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 

decimal 
? 
LoyaltyPointsUsed %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
public 
class !
ProcessPaymentRequest "
{ 
public 

Guid 
OrderId 
{ 
get 
; 
set "
;" #
}$ %
public 

string 
PaymentMethod 
{  !
get" %
;% &
set' *
;* +
}, -
=. /
$str0 6
;6 7
public 

decimal 
Amount 
{ 
get 
;  
set! $
;$ %
}& '
public 

decimal 
? 
LoyaltyPointsUsed %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
}   Ä
OC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\OrderDto.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
{ 
public 

class 
OrderDto 
{ 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public		 
string		 
OrderNumber		 !
{		" #
get		$ '
;		' (
set		) ,
;		, -
}		. /
=		0 1
string		2 8
.		8 9
Empty		9 >
;		> ?
public

 
Guid

 
UserId

 
{

 
get

  
;

  !
set

" %
;

% &
}

' (
public 
decimal 
TotalAmount "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
string 
Status 
{ 
get "
;" #
set$ '
;' (
}) *
=+ ,
string- 3
.3 4
Empty4 9
;9 :
public 
string 
PaymentStatus #
{$ %
get& )
;) *
set+ .
;. /
}0 1
=2 3
string4 :
.: ;
Empty; @
;@ A
public 
string 
? 
PaymentMethod $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string 
? 
Notes 
{ 
get "
;" #
set$ '
;' (
}) *
public 
DateTime 
	CreatedAt !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
List 
< 
OrderItemDto  
>  !

OrderItems" ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
=; <
new= @
(@ A
)A B
;B C
} 
public 

class 
OrderItemDto 
{ 
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
Guid 
	ProductId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
ProductName !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
int 
Quantity 
{ 
get !
;! "
set# &
;& '
}( )
public 
decimal 
	UnitPrice  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
decimal 
Subtotal 
{  !
get" %
;% &
set' *
;* +
}, -
public 
string 
? 
SpecialInstructions *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
} 
}    
YC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\InventoryReportDto.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
;$ %
public 
record 
InventoryReportDto  
{ 
public 

DateTime 
? 

ReportDate 
{  !
get" %
;% &
init' +
;+ ,
}- .
public 

int  
TotalOrdersProcessed #
{$ %
get& )
;) *
init+ /
;/ 0
}1 2
public 

int 
TotalItemsSold 
{ 
get  #
;# $
init% )
;) *
}+ ,
public 

decimal 
TotalRevenue 
{  !
get" %
;% &
init' +
;+ ,
}- .
public		 

List		 
<		 
InventoryItemDto		  
>		  !
InventoryItems		" 0
{		1 2
get		3 6
;		6 7
init		8 <
;		< =
}		> ?
=		@ A
new		B E
(		E F
)		F G
;		G H
}

 
public 
record 
InventoryItemDto 
{ 
public 

Guid 
	ProductId 
{ 
get 
;  
init! %
;% &
}' (
public 

string 
ProductName 
{ 
get  #
;# $
init% )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 

int 
QuantitySold 
{ 
get !
;! "
init# '
;' (
}) *
public 

decimal 
	UnitPrice 
{ 
get "
;" #
init$ (
;( )
}* +
public 

decimal 
Subtotal 
{ 
get !
;! "
init# '
;' (
}) *
} ≤(
hC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\Converters\StringOrArrayConverter.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
.$ %

Converters% /
;/ 0
public 
class "
StringOrArrayConverter #
:$ %
JsonConverter& 3
<3 4
List4 8
<8 9
string9 ?
>? @
?@ A
>A B
{ 
public		 

override		 
List		 
<		 
string		 
>		  
?		  !
Read		" &
(		& '
ref		' *
Utf8JsonReader		+ 9
reader		: @
,		@ A
Type		B F
typeToConvert		G T
,		T U!
JsonSerializerOptions		V k
options		l s
)		s t
{

 
if 

( 
reader 
. 
	TokenType 
== 
JsonTokenType  -
.- .
Null. 2
)2 3
return 
null 
; 
if 

( 
reader 
. 
	TokenType 
== 
JsonTokenType  -
.- .
String. 4
)4 5
{ 	
var 
s 
= 
reader 
. 
	GetString $
($ %
)% &
;& '
if 
( 
string 
. 
IsNullOrWhiteSpace )
() *
s* +
)+ ,
), -
return. 4
new5 8
List9 =
<= >
string> D
>D E
(E F
)F G
;G H
return 
new 
List 
< 
string "
>" #
{$ %
s& '
}( )
;) *
} 	
if 

( 
reader 
. 
	TokenType 
== 
JsonTokenType  -
.- .

StartArray. 8
)8 9
{ 	
var 
list 
= 
new 
List 
<  
string  &
>& '
(' (
)( )
;) *
while 
( 
reader 
. 
Read 
( 
)  
)  !
{ 
if 
( 
reader 
. 
	TokenType $
==% '
JsonTokenType( 5
.5 6
EndArray6 >
)> ?
break 
; 
if 
( 
reader 
. 
	TokenType $
==% '
JsonTokenType( 5
.5 6
String6 <
)< =
{ 
var 
val 
= 
reader $
.$ %
	GetString% .
(. /
)/ 0
;0 1
if   
(   
!   
string   
.    
IsNullOrWhiteSpace    2
(  2 3
val  3 6
)  6 7
)  7 8
list!! 
.!! 
Add!!  
(!!  !
val!!! $
)!!$ %
;!!% &
continue"" 
;"" 
}## 
reader&& 
.&& 
Skip&& 
(&& 
)&& 
;&& 
}'' 
return(( 
list(( 
;(( 
})) 	
reader,, 
.,, 
Skip,, 
(,, 
),, 
;,, 
return-- 
new-- 
List-- 
<-- 
string-- 
>-- 
(--  
)--  !
;--! "
}.. 
public00 

override00 
void00 
Write00 
(00 
Utf8JsonWriter00 -
writer00. 4
,004 5
List006 :
<00: ;
string00; A
>00A B
?00B C
value00D I
,00I J!
JsonSerializerOptions00K `
options00a h
)00h i
{11 
if22 

(22 
value22 
is22 
null22 
)22 
{33 	
writer44 
.44 
WriteNullValue44 !
(44! "
)44" #
;44# $
return55 
;55 
}66 	
writer88 
.88 
WriteStartArray88 
(88 
)88  
;88  !
foreach99 
(99 
var99 
s99 
in99 
value99 
)99  
{:: 	
if;; 
(;; 
!;; 
string;; 
.;; 
IsNullOrWhiteSpace;; *
(;;* +
s;;+ ,
);;, -
);;- .
writer<< 
.<< 
WriteStringValue<< '
(<<' (
s<<( )
)<<) *
;<<* +
}== 	
writer>> 
.>> 
WriteEndArray>> 
(>> 
)>> 
;>> 
}?? 
}@@ “
OC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\CartItem.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
{ 
public 

class 
CartItem 
{ 
public 
Guid 
	ProductId 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
=) *
string+ 1
.1 2
Empty2 7
;7 8
public		 
decimal		 
	UnitPrice		  
{		! "
get		# &
;		& '
set		( +
;		+ ,
}		- .
public

 
int

 
Quantity

 
{

 
get

 !
;

! "
set

# &
;

& '
}

( )
public 
CartItem 
( 
) 
{ 
} 
public 
CartItem 
( 
Guid 
	productId &
,& '
string( .
name/ 3
,3 4
decimal5 <
	unitPrice= F
,F G
intH K
quantityL T
)T U
{ 	
	ProductId 
= 
	productId !
;! "
Name 
= 
name 
; 
	UnitPrice 
= 
	unitPrice !
;! "
Quantity 
= 
quantity 
;  
} 	
public 
decimal 
Subtotal 
=>  "
	UnitPrice# ,
*- .
Quantity/ 7
;7 8
} 
} À!
VC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Models\Auth\AuthModels.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Models $
.$ %
Auth% )
{ 
public 

class 
LoginRequest 
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public		 
string		 
Password		 
{		  
get		! $
;		$ %
set		& )
;		) *
}		+ ,
=		- .
string		/ 5
.		5 6
Empty		6 ;
;		; <
}

 
public 

class 
RegisterRequest  
{ 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
=- .
string/ 5
.5 6
Empty6 ;
;; <
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
=0 1
string2 8
.8 9
Empty9 >
;> ?
public 
string 
? 
	StudentId  
{! "
get# &
;& '
set( +
;+ ,
}- .
} 
public 

class 
AuthResponseDto  
{ 
public 
string 
Token 
{ 
get !
;! "
set# &
;& '
}( )
=* +
string, 2
.2 3
Empty3 8
;8 9
public 
UserDto 
User 
{ 
get !
;! "
set# &
;& '
}( )
=* +
null, 0
!0 1
;1 2
} 
public 

class 
UserDto 
{ 
public   
Guid   
Id   
{   
get   
;   
set   !
;  ! "
}  # $
public!! 
string!! 
Email!! 
{!! 
get!! !
;!!! "
set!!# &
;!!& '
}!!( )
=!!* +
string!!, 2
.!!2 3
Empty!!3 8
;!!8 9
public"" 
string"" 
FullName"" 
{""  
get""! $
;""$ %
set""& )
;"") *
}""+ ,
=""- .
string""/ 5
.""5 6
Empty""6 ;
;""; <
public## 
string## 
Role## 
{## 
get##  
;##  !
set##" %
;##% &
}##' (
=##) *
string##+ 1
.##1 2
Empty##2 7
;##7 8
public$$ 
string$$ 
PhoneNumber$$ !
{$$" #
get$$$ '
;$$' (
set$$) ,
;$$, -
}$$. /
=$$0 1
string$$2 8
.$$8 9
Empty$$9 >
;$$> ?
public%% 
string%% 
?%% 
	StudentId%%  
{%%! "
get%%# &
;%%& '
set%%( +
;%%+ ,
}%%- .
public&& 
decimal&& 
LoyaltyPoints&& $
{&&% &
get&&' *
;&&* +
set&&, /
;&&/ 0
}&&1 2
public'' 
bool'' 
IsActive'' 
{'' 
get'' "
;''" #
set''$ '
;''' (
}'') *
}(( 
})) ¬à
YC:\Users\bmate\Source\Repos\campus__eats\CampusEats.Frontend\Features\Auth\AuthService.cs
	namespace 	

CampusEats
 
. 
Frontend 
. 
Features &
.& '
Auth' +
{		 
public

 

class

 
AuthService

 
{ 
private 
readonly 

HttpClient #
_httpClient$ /
;/ 0
private 
readonly 
LocalStorageService , 
_localStorageService- A
;A B
private 
readonly 
	AuthState "

_authState# -
;- .
public 
event 
Action 
? 
AuthStateChanged -
;- .
public 
AuthService 
( 

HttpClient %

httpClient& 0
,0 1
LocalStorageService .
localStorageService/ B
,B C
	AuthState $
	authState% .
). /
{ 	
_httpClient 
= 

httpClient $
;$ % 
_localStorageService  
=! "
localStorageService# 6
;6 7

_authState 
= 
	authState "
;" #
} 	
public 
async 
Task 
InitializeAsync )
() *
)* +
{ 	
var 
token 
= 
await  
_localStorageService 2
.2 3
GetItemAsync3 ?
(? @
$str@ K
)K L
;L M
if   
(   
!   
string   
.   
IsNullOrWhiteSpace   *
(  * +
token  + 0
)  0 1
)  1 2
{!! 
var## 
(## 
userId## 
,## 
email## "
,##" #
roles##$ )
)##) *
=##+ ,
ParseJwt##- 5
(##5 6
token##6 ;
)##; <
;##< =

_authState&& 
.&& 
Set&& 
(&& 
token&& $
,&&$ %
userId&&& ,
,&&, -
email&&. 3
,&&3 4
roles&&5 :
)&&: ;
;&&; <
}'' 
else(( 
{)) 

_authState** 
.** 
Clear**  
(**  !
)**! "
;**" #
}++ 
NotifyStateChanged,, 
(,, 
),,  
;,,  !
}-- 	
public11 
async11 
Task11 
<11 
(11 
bool11 
ok11  "
,11" #
List11$ (
<11( )
string11) /
>11/ 0
errors111 7
)117 8
>118 9

LoginAsync11: D
(11D E
LoginRequest11E Q
request11R Y
)11Y Z
{22 	
try33 
{44 
var55 
response55 
=55 
await55 $
_httpClient55% 0
.550 1
PostAsJsonAsync551 @
(55@ A
$str55A R
,55R S
request55T [
)55[ \
;55\ ]
if77 
(77 
response77 
.77 
IsSuccessStatusCode77 0
)770 1
{88 
var99 
authData99  
=99! "
await99# (
response99) 1
.991 2
Content992 9
.999 :
ReadFromJsonAsync99: K
<99K L
AuthResponseDto99L [
>99[ \
(99\ ]
)99] ^
;99^ _
if;; 
(;; 
authData;;  
!=;;! #
null;;$ (
&&;;) +
!;;, -
string;;- 3
.;;3 4
IsNullOrEmpty;;4 A
(;;A B
authData;;B J
.;;J K
Token;;K P
);;P Q
);;Q R
{<< 
await== 
HandleAuthSuccess== /
(==/ 0
authData==0 8
)==8 9
;==9 :
return>> 
(>>  
true>>  $
,>>$ %
new>>& )
List>>* .
<>>. /
string>>/ 5
>>>5 6
(>>6 7
)>>7 8
)>>8 9
;>>9 :
}?? 
}@@ 
varCC 
errorMsgCC 
=CC 
awaitCC $
responseCC% -
.CC- .
ContentCC. 5
.CC5 6
ReadAsStringAsyncCC6 G
(CCG H
)CCH I
;CCI J
returnDD 
(DD 
falseDD 
,DD 
newDD "
ListDD# '
<DD' (
stringDD( .
>DD. /
{DD0 1
$strDD2 I
,DDI J
errorMsgDDK S
}DDT U
)DDU V
;DDV W
}EE 
catchFF 
(FF 
	ExceptionFF 
exFF 
)FF  
{GG 
returnHH 
(HH 
falseHH 
,HH 
newHH "
ListHH# '
<HH' (
stringHH( .
>HH. /
{HH0 1
exHH2 4
.HH4 5
MessageHH5 <
}HH= >
)HH> ?
;HH? @
}II 
}JJ 	
publicLL 
asyncLL 
TaskLL 
<LL 
(LL 
boolLL 
okLL  "
,LL" #
ListLL$ (
<LL( )
stringLL) /
>LL/ 0
errorsLL1 7
)LL7 8
>LL8 9
RegisterAsyncLL: G
(LLG H
RegisterRequestLLH W
requestLLX _
)LL_ `
{MM 	
tryNN 
{OO 
varPP 
responsePP 
=PP 
awaitPP $
_httpClientPP% 0
.PP0 1
PostAsJsonAsyncPP1 @
(PP@ A
$strPPA U
,PPU V
requestPPW ^
)PP^ _
;PP_ `
ifRR 
(RR 
responseRR 
.RR 
IsSuccessStatusCodeRR 0
)RR0 1
{SS 
tryUU 
{VV 
varWW 
authDataWW $
=WW% &
awaitWW' ,
responseWW- 5
.WW5 6
ContentWW6 =
.WW= >
ReadFromJsonAsyncWW> O
<WWO P
AuthResponseDtoWWP _
>WW_ `
(WW` a
)WWa b
;WWb c
ifZZ 
(ZZ 
authDataZZ $
!=ZZ% '
nullZZ( ,
&&ZZ- /
!ZZ0 1
stringZZ1 7
.ZZ7 8
IsNullOrEmptyZZ8 E
(ZZE F
authDataZZF N
.ZZN O
TokenZZO T
)ZZT U
)ZZU V
{[[ 
await\\ !
HandleAuthSuccess\\" 3
(\\3 4
authData\\4 <
)\\< =
;\\= >
}]] 
}^^ 
catch__ 
(__ 
JsonException__ (
)__( )
{`` 
Consoledd 
.dd  
	WriteLinedd  )
(dd) *
$strdd* T
)ddT U
;ddU V
}ee 
returnhh 
(hh 
truehh  
,hh  !
newhh" %
Listhh& *
<hh* +
stringhh+ 1
>hh1 2
(hh2 3
)hh3 4
)hh4 5
;hh5 6
}ii 
varll 
errorMsgll 
=ll 
awaitll $
responsell% -
.ll- .
Contentll. 5
.ll5 6
ReadAsStringAsyncll6 G
(llG H
)llH I
;llI J
returnmm 
(mm 
falsemm 
,mm 
newmm "
Listmm# '
<mm' (
stringmm( .
>mm. /
{mm0 1
$strmm2 H
,mmH I
errorMsgmmJ R
}mmS T
)mmT U
;mmU V
}nn 
catchoo 
(oo 
	Exceptionoo 
exoo 
)oo  
{pp 
returnqq 
(qq 
falseqq 
,qq 
newqq "
Listqq# '
<qq' (
stringqq( .
>qq. /
{qq0 1
exqq2 4
.qq4 5
Messageqq5 <
}qq= >
)qq> ?
;qq? @
}rr 
}ss 	
publicvv 
asyncvv 
Taskvv 
LogoutAsyncvv %
(vv% &
)vv& '
{ww 	
awaitxx  
_localStorageServicexx &
.xx& '
RemoveItemAsyncxx' 6
(xx6 7
$strxx7 B
)xxB C
;xxC D

_authStateyy 
.yy 
Clearyy 
(yy 
)yy 
;yy 
NotifyStateChangedzz 
(zz 
)zz  
;zz  !
}{{ 	
private}} 
async}} 
Task}} 
HandleAuthSuccess}} ,
(}}, -
AuthResponseDto}}- <
authData}}= E
)}}E F
{~~ 	
await  
_localStorageService &
.& '
SetItemAsync' 3
(3 4
$str4 ?
,? @
authDataA I
.I J
TokenJ O
)O P
;P Q
var
ÇÇ 
userId
ÇÇ 
=
ÇÇ 
authData
ÇÇ !
.
ÇÇ! "
User
ÇÇ" &
.
ÇÇ& '
Id
ÇÇ' )
.
ÇÇ) *
ToString
ÇÇ* 2
(
ÇÇ2 3
)
ÇÇ3 4
;
ÇÇ4 5
var
ÉÉ 
roles
ÉÉ 
=
ÉÉ 
new
ÉÉ 
List
ÉÉ  
<
ÉÉ  !
string
ÉÉ! '
>
ÉÉ' (
{
ÉÉ) *
authData
ÉÉ+ 3
.
ÉÉ3 4
User
ÉÉ4 8
.
ÉÉ8 9
Role
ÉÉ9 =
}
ÉÉ> ?
;
ÉÉ? @

_authState
ÖÖ 
.
ÖÖ 
Set
ÖÖ 
(
ÖÖ 
authData
ÖÖ #
.
ÖÖ# $
Token
ÖÖ$ )
,
ÖÖ) *
userId
ÖÖ+ 1
,
ÖÖ1 2
authData
ÖÖ3 ;
.
ÖÖ; <
User
ÖÖ< @
.
ÖÖ@ A
Email
ÖÖA F
,
ÖÖF G
roles
ÖÖH M
)
ÖÖM N
;
ÖÖN O 
NotifyStateChanged
ÜÜ 
(
ÜÜ 
)
ÜÜ  
;
ÜÜ  !
}
áá 	
private
ââ 
void
ââ  
NotifyStateChanged
ââ '
(
ââ' (
)
ââ( )
=>
ââ* ,
AuthStateChanged
ââ- =
?
ââ= >
.
ââ> ?
Invoke
ââ? E
(
ââE F
)
ââF G
;
ââG H
private
åå 
static
åå 
(
åå 
string
åå 
userId
åå %
,
åå% &
string
åå' -
email
åå. 3
,
åå3 4
List
åå5 9
<
åå9 :
string
åå: @
>
åå@ A
roles
ååB G
)
ååG H
ParseJwt
ååI Q
(
ååQ R
string
ååR X
token
ååY ^
)
åå^ _
{
çç 	
try
éé 
{
èè 
var
êê 
parts
êê 
=
êê 
token
êê !
.
êê! "
Split
êê" '
(
êê' (
$char
êê( +
)
êê+ ,
;
êê, -
if
ëë 
(
ëë 
parts
ëë 
.
ëë 
Length
ëë  
<
ëë! "
$num
ëë# $
)
ëë$ %
return
ëë& ,
(
ëë- .
$str
ëë. 0
,
ëë0 1
$str
ëë2 4
,
ëë4 5
new
ëë6 9
List
ëë: >
<
ëë> ?
string
ëë? E
>
ëëE F
(
ëëF G
)
ëëG H
)
ëëH I
;
ëëI J
var
ìì 
payload
ìì 
=
ìì 
parts
ìì #
[
ìì# $
$num
ìì$ %
]
ìì% &
;
ìì& '
switch
îî 
(
îî 
payload
îî 
.
îî  
Length
îî  &
%
îî' (
$num
îî) *
)
îî* +
{
ïï 
case
ññ 
$num
ññ 
:
ññ 
payload
ññ #
+=
ññ$ &
$str
ññ' +
;
ññ+ ,
break
ññ- 2
;
ññ2 3
case
óó 
$num
óó 
:
óó 
payload
óó #
+=
óó$ &
$str
óó' *
;
óó* +
break
óó, 1
;
óó1 2
}
òò 
var
öö 
	jsonBytes
öö 
=
öö 
Convert
öö  '
.
öö' (
FromBase64String
öö( 8
(
öö8 9
payload
öö9 @
)
öö@ A
;
ööA B
var
õõ 

jsonString
õõ 
=
õõ  
System
õõ! '
.
õõ' (
Text
õõ( ,
.
õõ, -
Encoding
õõ- 5
.
õõ5 6
UTF8
õõ6 :
.
õõ: ;
	GetString
õõ; D
(
õõD E
	jsonBytes
õõE N
)
õõN O
;
õõO P
using
ùù 
var
ùù 
doc
ùù 
=
ùù 
JsonDocument
ùù  ,
.
ùù, -
Parse
ùù- 2
(
ùù2 3

jsonString
ùù3 =
)
ùù= >
;
ùù> ?
var
ûû 
root
ûû 
=
ûû 
doc
ûû 
.
ûû 
RootElement
ûû *
;
ûû* +
string
°° 
userId
°° 
=
°° 
$str
°°  "
;
°°" #
if
¢¢ 
(
¢¢ 
root
¢¢ 
.
¢¢ 
TryGetProperty
¢¢ '
(
¢¢' (
$str
¢¢( -
,
¢¢- .
out
¢¢/ 2
var
¢¢3 6
sub
¢¢7 :
)
¢¢: ;
)
¢¢; <
userId
¢¢= C
=
¢¢D E
sub
¢¢F I
.
¢¢I J
	GetString
¢¢J S
(
¢¢S T
)
¢¢T U
??
¢¢V X
$str
¢¢Y [
;
¢¢[ \
else
££ 
if
££ 
(
££ 
root
££ 
.
££ 
TryGetProperty
££ ,
(
££, -
$str
££- 5
,
££5 6
out
££7 :
var
££; >
nid
££? B
)
££B C
)
££C D
userId
££E K
=
££L M
nid
££N Q
.
££Q R
	GetString
££R [
(
££[ \
)
££\ ]
??
££^ `
$str
££a c
;
££c d
string
¶¶ 
email
¶¶ 
=
¶¶ 
$str
¶¶ !
;
¶¶! "
if
ßß 
(
ßß 
root
ßß 
.
ßß 
TryGetProperty
ßß '
(
ßß' (
$str
ßß( /
,
ßß/ 0
out
ßß1 4
var
ßß5 8
e
ßß9 :
)
ßß: ;
)
ßß; <
email
ßß= B
=
ßßC D
e
ßßE F
.
ßßF G
	GetString
ßßG P
(
ßßP Q
)
ßßQ R
??
ßßS U
$str
ßßV X
;
ßßX Y
else
®® 
if
®® 
(
®® 
root
®® 
.
®® 
TryGetProperty
®® ,
(
®®, -
$str
®®- :
,
®®: ;
out
®®< ?
var
®®@ C
un
®®D F
)
®®F G
)
®®G H
email
®®I N
=
®®O P
un
®®Q S
.
®®S T
	GetString
®®T ]
(
®®] ^
)
®®^ _
??
®®` b
$str
®®c e
;
®®e f
var
´´ 
roles
´´ 
=
´´ 
new
´´ 
List
´´  $
<
´´$ %
string
´´% +
>
´´+ ,
(
´´, -
)
´´- .
;
´´. /
string
¨¨ 
[
¨¨ 
]
¨¨ 
roleKeys
¨¨ !
=
¨¨" #
{
¨¨$ %
$str
¨¨& ,
,
¨¨, -
$str
¨¨. 5
,
¨¨5 6
$str
¨¨7 u
}
¨¨v w
;
¨¨w x
foreach
ÆÆ 
(
ÆÆ 
var
ÆÆ 
key
ÆÆ  
in
ÆÆ! #
roleKeys
ÆÆ$ ,
)
ÆÆ, -
{
ØØ 
if
∞∞ 
(
∞∞ 
root
∞∞ 
.
∞∞ 
TryGetProperty
∞∞ +
(
∞∞+ ,
key
∞∞, /
,
∞∞/ 0
out
∞∞1 4
var
∞∞5 8
r
∞∞9 :
)
∞∞: ;
)
∞∞; <
{
±± 
if
≤≤ 
(
≤≤ 
r
≤≤ 
.
≤≤ 
	ValueKind
≤≤ '
==
≤≤( *
JsonValueKind
≤≤+ 8
.
≤≤8 9
Array
≤≤9 >
)
≤≤> ?
{
≥≥ 
foreach
¥¥ #
(
¥¥$ %
var
¥¥% (
item
¥¥) -
in
¥¥. 0
r
¥¥1 2
.
¥¥2 3
EnumerateArray
¥¥3 A
(
¥¥A B
)
¥¥B C
)
¥¥C D
roles
¥¥E J
.
¥¥J K
Add
¥¥K N
(
¥¥N O
item
¥¥O S
.
¥¥S T
	GetString
¥¥T ]
(
¥¥] ^
)
¥¥^ _
!
¥¥_ `
)
¥¥` a
;
¥¥a b
}
µµ 
else
∂∂ 
if
∂∂ 
(
∂∂  !
r
∂∂! "
.
∂∂" #
	ValueKind
∂∂# ,
==
∂∂- /
JsonValueKind
∂∂0 =
.
∂∂= >
String
∂∂> D
)
∂∂D E
{
∑∑ 
roles
∏∏ !
.
∏∏! "
Add
∏∏" %
(
∏∏% &
r
∏∏& '
.
∏∏' (
	GetString
∏∏( 1
(
∏∏1 2
)
∏∏2 3
!
∏∏3 4
)
∏∏4 5
;
∏∏5 6
}
ππ 
}
∫∫ 
}
ªª 
return
ΩΩ 
(
ΩΩ 
userId
ΩΩ 
,
ΩΩ 
email
ΩΩ  %
,
ΩΩ% &
roles
ΩΩ' ,
)
ΩΩ, -
;
ΩΩ- .
}
ææ 
catch
øø 
{
¿¿ 
return
¡¡ 
(
¡¡ 
$str
¡¡ 
,
¡¡ 
$str
¡¡ 
,
¡¡ 
new
¡¡  #
List
¡¡$ (
<
¡¡( )
string
¡¡) /
>
¡¡/ 0
(
¡¡0 1
)
¡¡1 2
)
¡¡2 3
;
¡¡3 4
}
¬¬ 
}
√√ 	
}
ƒƒ 
}≈≈ 